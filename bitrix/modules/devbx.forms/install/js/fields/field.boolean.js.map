{"version":3,"file":"field.boolean.js","sources":["../../../srcjs/vue-webform-public/fields/field.mixin.js","../../../srcjs/vue-webform-public/fields/field.boolean/devbx.form.layout.field.boolean.js"],"sourcesContent":["export default {\r\n    props: ['page', 'item', 'row', 'active', 'config'],\r\n    data() {\r\n        return {\r\n        };\r\n    },\r\n    mounted() {\r\n        this.item.component = this;\r\n    },\r\n    unmounted() {\r\n        this.item.component = false;\r\n    },\r\n    computed: {\r\n        labelFormatted() {\r\n            return this.$root.htmlFormatFields(BX.util.htmlspecialchars(this.config.label));\r\n        },\r\n\r\n        formLabelFormatted() {\r\n            return this.labelFormatted + (this.required ? ' <span class=\"devbx-webform-asterisk\">*</span>' : '');\r\n        },\r\n\r\n        helpTextFormatted() {\r\n            return this.$root.htmlFormatFields(this.config.helpText);\r\n        },\r\n\r\n        id() {\r\n            return 'devbx-webform-' + this.$.uid;\r\n        },\r\n\r\n        readonly() {\r\n            return this.$root.formReadonly || this.$root.checkCondition(this, this.config, 'readOnlyRule') === true;\r\n        },\r\n\r\n\r\n        required() {\r\n            return this.$root.checkCondition(this, this.config, 'requireRule') === true;\r\n        },\r\n\r\n        hasCustomError() {\r\n            return this.$root.checkCondition(this, this.config, 'showCustomError') === true;\r\n        },\r\n\r\n        errorMessage: {\r\n            get() {\r\n                return this.item.errorMessage;\r\n            },\r\n            set(value) {\r\n                this.item.errorMessage = value;\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        checkRequired() {\r\n            if (!this.$root.validation)\r\n                return false;\r\n\r\n            if (typeof this.field === \"undefined\") {\r\n                console.error('computed field not defined');\r\n                return false;\r\n            }\r\n\r\n            if (this.required) {\r\n                if (typeof this.field.value === \"number\")\r\n                    return false;\r\n\r\n                if (typeof this.field.value === \"boolean\" && this.field.value)\r\n                    return false;\r\n\r\n                if (this.field.value === undefined || this.field.value === null || !this.field.value.length) {\r\n                    this.errorMessage = this.$root.formatString(this.$Bitrix.Loc.getMessage('DEVBX_WEB_FORM_ERR_FIELD_REQUIRED'), '#FIELD_NAME#', this.labelFormatted);\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        checkCustomError()\r\n        {\r\n            if (!this.$root.validation)\r\n                return false;\r\n\r\n            if (this.config.customError && this.hasCustomError)\r\n            {\r\n                this.errorMessage = this.config.customError;\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        checkRuleErrors()\r\n        {\r\n            this.errorMessage = '';\r\n\r\n            if (this.checkRequired())\r\n                return true;\r\n\r\n            return this.checkCustomError();\r\n        },\r\n    },\r\n}","import './devbx.form.layout.field.boolean.css';\r\nimport fieldMixin from \"./../field.mixin\";\r\n\r\nBX.addCustomEvent(\"DevBxWebFormCreated\", function(app) {\r\n    app.component('devbx-form-layout-field-boolean', {\r\n        mixins: [fieldMixin],\r\n        watch: {\r\n            'defaultValue': {\r\n                immediate: true,\r\n                handler: function (val) {\r\n                    if (!this.field.changed) {\r\n                        this.field.value = val;\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        methods: {\r\n            checkErrors() {\r\n                if (this.checkRuleErrors())\r\n                    return true;\r\n\r\n                return false;\r\n            },\r\n\r\n            setFocus() {\r\n                //this.$el.querySelector('input, textarea').focus();\r\n            },\r\n        },\r\n        computed: {\r\n            defaultValue() {\r\n                return this.config.defaultValue;\r\n            },\r\n\r\n            field() {\r\n                return this.$root.formFieldByName['Fields.' + this.config.fieldName];\r\n            },\r\n\r\n            value: {\r\n                get() {\r\n                    return this.field.value;\r\n                },\r\n\r\n                set(value) {\r\n                    if (this.field.value !== value)\r\n                    {\r\n                        this.field.value = value;\r\n                        this.field.changed = true;\r\n\r\n                        this.$root.checkPageErrors(false, false);\r\n                    }\r\n                },\r\n            },\r\n\r\n            labelValueYes() {\r\n                if (this.config.customLabels && this.config.customLabelYes)\r\n                    return this.config.customLabelYes;\r\n\r\n                return this.$Bitrix.Loc.getMessage('DEVBX_WEB_FORM_FIELD_BOOLEAN_VALUE_TRUE');\r\n            },\r\n\r\n            labelValueNo() {\r\n                if (this.config.customLabels && this.config.customLabelNo)\r\n                    return this.config.customLabelNo;\r\n\r\n                return this.$Bitrix.Loc.getMessage('DEVBX_WEB_FORM_FIELD_BOOLEAN_VALUE_FALSE');\r\n            },\r\n\r\n        },\r\n        template: `\r\n    <div class=\"devbx-webform-field\" :class=\"{'devbx-webform-required': required, 'devbx-webform--is-error': errorMessage.length}\">\r\n        <label class=\"devbx-webform-label\" :for=\"id\" v-html=\"formLabelFormatted\" v-if=\"!config.labelHidden && config.type == 'RADIO'\"></label>\r\n        <div class=\"devbx-webform-boolean-radio-group\" v-if=\"config.type == 'RADIO'\">\r\n            <label class=\"devbx-webform-boolean-radio\">\r\n                <input class=\"devbx-webform-boolean-radio-input\" \r\n                    tabindex=\"-1\" \r\n                    @click=\"value = true\" \r\n                    type=\"radio\" \r\n                    :disabled=\"readonly\"\r\n                    :checked=\"value\">\r\n                        <span class=\"devbx-webform-boolean-radio-label\">{{labelValueYes}}</span>                    \r\n            </label>                 \r\n\r\n            <label class=\"devbx-webform-boolean-radio\">\r\n                <input class=\"devbx-webform-boolean-radio-input\" \r\n                    tabindex=\"-1\" \r\n                    @click=\"value = false\" \r\n                    type=\"radio\" \r\n                    :disabled=\"readonly\"\r\n                    :checked=\"!value\">\r\n                        <span class=\"devbx-webform-boolean-radio-label\">{{labelValueNo}}</span>                    \r\n            </label>                 \r\n        </div>\r\n        <div class=\"devbx-webform-boolean-checkbox-inline\" v-else>\r\n            <label class=\"devbx-webform-boolean-checkbox\">\r\n                <input class=\"devbx-webform-boolean-checkbox-input\" \r\n                    tabindex=\"-1\" \r\n                    type=\"checkbox\" \r\n                    :disabled=\"readonly\"\r\n                    v-model=\"value\">\r\n                    <span class=\"devbx-webform-boolean-checkbox-label\" v-html=\"formLabelFormatted\"></span>                    \r\n            </label>                 \r\n        </div>\r\n        \r\n        <div class=\"devbx-webform-helptext\" v-if=\"helpTextFormatted.length>0\" v-html=\"helpTextFormatted\"></div>\r\n\r\n        <transition name=\"devbx-webform-field\">\r\n            <div class=\"devbx-webform-error-message\" v-if=\"errorMessage\" v-html=\"errorMessage\"></div>\r\n        </transition>\r\n    </div>\r\n    `\r\n    });\r\n});"],"names":["props","data","mounted","item","component","unmounted","computed","labelFormatted","$root","htmlFormatFields","BX","util","htmlspecialchars","config","label","formLabelFormatted","required","helpTextFormatted","helpText","id","$","uid","readonly","formReadonly","checkCondition","hasCustomError","errorMessage","get","set","value","methods","checkRequired","validation","field","console","error","undefined","length","formatString","$Bitrix","Loc","getMessage","checkCustomError","customError","checkRuleErrors","addCustomEvent","app","mixins","fieldMixin","watch","immediate","handler","val","changed","checkErrors","setFocus","defaultValue","formFieldByName","fieldName","checkPageErrors","labelValueYes","customLabels","customLabelYes","labelValueNo","customLabelNo","template"],"mappings":"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"}