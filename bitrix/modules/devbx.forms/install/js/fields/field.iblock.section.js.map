{"version":3,"file":"field.iblock.section.js","sources":["../../../srcjs/vue-webform-public/fields/field.mixin.js","../../../srcjs/vue-webform-public/fields/field.iblock.section/devbx.form.layout.field.iblock.section.js"],"sourcesContent":["export default {\r\n    props: ['page', 'item', 'row', 'active', 'config'],\r\n    data() {\r\n        return {\r\n        };\r\n    },\r\n    mounted() {\r\n        this.item.component = this;\r\n    },\r\n    unmounted() {\r\n        this.item.component = false;\r\n    },\r\n    computed: {\r\n        labelFormatted() {\r\n            return this.$root.htmlFormatFields(BX.util.htmlspecialchars(this.config.label));\r\n        },\r\n\r\n        formLabelFormatted() {\r\n            return this.labelFormatted + (this.required ? ' <span class=\"devbx-webform-asterisk\">*</span>' : '');\r\n        },\r\n\r\n        helpTextFormatted() {\r\n            return this.$root.htmlFormatFields(this.config.helpText);\r\n        },\r\n\r\n        id() {\r\n            return 'devbx-webform-' + this.$.uid;\r\n        },\r\n\r\n        readonly() {\r\n            return this.$root.formReadonly || this.$root.checkCondition(this, this.config, 'readOnlyRule') === true;\r\n        },\r\n\r\n\r\n        required() {\r\n            return this.$root.checkCondition(this, this.config, 'requireRule') === true;\r\n        },\r\n\r\n        hasCustomError() {\r\n            return this.$root.checkCondition(this, this.config, 'showCustomError') === true;\r\n        },\r\n\r\n        errorMessage: {\r\n            get() {\r\n                return this.item.errorMessage;\r\n            },\r\n            set(value) {\r\n                this.item.errorMessage = value;\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        checkRequired() {\r\n            if (!this.$root.validation)\r\n                return false;\r\n\r\n            if (typeof this.field === \"undefined\") {\r\n                console.error('computed field not defined');\r\n                return false;\r\n            }\r\n\r\n            if (this.required) {\r\n                if (typeof this.field.value === \"number\")\r\n                    return false;\r\n\r\n                if (typeof this.field.value === \"boolean\" && this.field.value)\r\n                    return false;\r\n\r\n                if (this.field.value === undefined || this.field.value === null || !this.field.value.length) {\r\n                    this.errorMessage = this.$root.formatString(this.$Bitrix.Loc.getMessage('DEVBX_WEB_FORM_ERR_FIELD_REQUIRED'), '#FIELD_NAME#', this.labelFormatted);\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        checkCustomError()\r\n        {\r\n            if (!this.$root.validation)\r\n                return false;\r\n\r\n            if (this.config.customError && this.hasCustomError)\r\n            {\r\n                this.errorMessage = this.config.customError;\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        checkRuleErrors()\r\n        {\r\n            this.errorMessage = '';\r\n\r\n            if (this.checkRequired())\r\n                return true;\r\n\r\n            return this.checkCustomError();\r\n        },\r\n    },\r\n}","import './devbx.form.layout.field.iblock.section.css';\r\nimport fieldMixin from \"./../field.mixin\";\r\n\r\nBX.addCustomEvent(\"DevBxWebFormCreated\", function(app) {\r\n\r\n    let store = new BX.Vue3.Vuex.createStore({\r\n        state: {\r\n            sectionResult: [],\r\n        },\r\n        mutations: {\r\n            setIblockSectionItems(state, data) {\r\n                let result = false;\r\n\r\n                state.sectionResult.every(item => {\r\n                    if (item.sid === data.sid && item.fieldId === data.fieldId && item.filter === data.filter)\r\n                        result = item;\r\n\r\n                    return !result;\r\n                });\r\n\r\n                if (result) {\r\n                    if (data.hasOwnProperty('items'))\r\n                        result.data = data.items;\r\n\r\n                    if (data.hasOwnProperty('errors'))\r\n                        result.errors = data.errors;\r\n\r\n                    return;\r\n                }\r\n\r\n                state.sectionResult.push(BX.Vue3.reactive({\r\n                    sid: data.sid,\r\n                    fieldId: data.fieldId,\r\n                    filter: data.filter,\r\n                    data: data.items,\r\n                    errors: data.errors,\r\n                }));\r\n            }\r\n        },\r\n        actions: {\r\n            getIblockSectionItems(context, data) {\r\n                context.commit('setIblockSectionItems', Object.assign({items: false}, data));\r\n\r\n                BX.ajax.runAction('devbx:forms.api.webform.fieldRequest', {\r\n                    data: {\r\n                        lang: BX.message('LANGUAGE_ID'),\r\n                        sid: data.sid,\r\n                        fieldId: data.fieldId,\r\n                        params: {\r\n                            action: 'getList',\r\n                            filter: data.filter,\r\n                        },\r\n                    }\r\n                }).then(\r\n                    function (response) {\r\n                        context.commit('setIblockSectionItems', Object.assign({}, data, response.data));\r\n                    },\r\n                    function (response) {\r\n                        context.commit('setIblockSectionItems', Object.assign({}, data, {errors: response.errors}));\r\n                    },\r\n                );\r\n\r\n            }\r\n        },\r\n        getters: {\r\n            iblockSectionItems: state => (sid, fieldId, filter) => {\r\n                let result = false;\r\n\r\n                state.sectionResult.every(item => {\r\n                    if (item.sid === sid && item.fieldId === fieldId && item.filter === filter)\r\n                        result = item;\r\n\r\n                    return !result;\r\n                });\r\n\r\n                if (!result)\r\n                    return null;\r\n\r\n                return result;\r\n            }\r\n        },\r\n    });\r\n\r\n    app.component('devbx-form-layout-field-iblock-section', {\r\n        mixins: [fieldMixin],\r\n        mounted() {\r\n        },\r\n        data() {\r\n            return {\r\n                isLoading: false,\r\n            };\r\n        },\r\n        watch: {\r\n            'field.value': function (val) {\r\n\r\n                let valueFields = ['NAME'];\r\n\r\n                let option = this.selectedOption;\r\n\r\n                valueFields.forEach(fieldName => {\r\n                    let formField = this.$root.formFieldByName['Fields.' + this.config.fieldName + '.' + fieldName];\r\n\r\n                    if (formField) {\r\n                        formField.value = option ? option.item[fieldName] : null;\r\n                        formField.changed = true;\r\n                    }\r\n                });\r\n\r\n            },\r\n        },\r\n        computed: {\r\n            field() {\r\n                return this.$root.formFieldByName['Fields.' + this.config.fieldName + '.ID'];\r\n            },\r\n\r\n            value: {\r\n                get() {\r\n                    return this.field.value;\r\n                },\r\n\r\n                set(value) {\r\n                    value = parseInt(value);\r\n                    value = isNaN(value) ? null : value;\r\n\r\n                    if (this.field.value !== value)\r\n                    {\r\n                        this.field.value = value;\r\n                        this.field.changed = true;\r\n\r\n                        this.$root.checkPageErrors(false, false);\r\n                    }\r\n                },\r\n            },\r\n\r\n            filterValues() {\r\n                let result = {};\r\n\r\n                this.config.filter.forEach(item => {\r\n                    if (item.valueType === 'field') {\r\n                        item.code = 'return ' + item.value + ';';\r\n                        if (this.$root.executeScriptCode(item)) {\r\n                            result[item.value] = item.returnVal.value;\r\n                        } else {\r\n                            result[item.value] = null;\r\n                        }\r\n                    }\r\n\r\n                    if (item.valueType === 'array') {\r\n                        item.value.forEach(singleValue => {\r\n                            switch (singleValue.valuetype)\r\n                            {\r\n                                case 'field':\r\n                                    let tmp = {\r\n                                        code: 'return '+singleValue.value+';'\r\n                                    };\r\n\r\n                                    if (this.$root.executeScriptCode(tmp)) {\r\n                                        result[singleValue.value] = tmp.returnVal.value;\r\n                                    } else {\r\n                                        result[singleValue.value] = null;\r\n                                    }\r\n                                    break;\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n                return JSON.stringify(result);\r\n            },\r\n\r\n            options() {\r\n                this.isLoading = true;\r\n\r\n                let items = store.getters.iblockSectionItems(this.$root.sid, this.config.systemId, this.filterValues);\r\n\r\n                if (items === null) {\r\n                    store.dispatch('getIblockSectionItems', {\r\n                        sid: this.$root.sid,\r\n                        fieldId: this.config.systemId,\r\n                        filter: this.filterValues,\r\n                    });\r\n\r\n                    items = store.getters.iblockSectionItems(this.$root.sid, this.config.systemId, this.filterValues);\r\n                    if (items)\r\n                        items.data; //for watching\r\n\r\n                    return [];\r\n                }\r\n\r\n                if (items.data === false)\r\n                    return [];\r\n\r\n                let result = [],\r\n                    valueValid  = false;\r\n\r\n                items.data.forEach(item => {\r\n                    let option = {\r\n                        value: item.ID,\r\n                        text: item.NAME,\r\n                        item: item,\r\n                    };\r\n\r\n                    valueValid |= item.ID === this.value;\r\n\r\n                    if (this.config.type == 'DROP_DOWN_PICTURE') {\r\n                        option.picture = item[this.config.pictureField];\r\n                    }\r\n\r\n                    result.push(option);\r\n                });\r\n\r\n                if (!valueValid)\r\n                {\r\n                    this.value = null;\r\n                }\r\n\r\n                this.isLoading = false;\r\n\r\n                return result;\r\n            },\r\n\r\n            selectedOption() {\r\n                let result = false;\r\n\r\n                this.options.every(item => {\r\n                    if (item.value === this.value)\r\n                        result = item;\r\n\r\n                    return !result;\r\n                });\r\n\r\n                return result;\r\n            },\r\n        },\r\n        methods: {\r\n            checkErrors() {\r\n                return this.checkRuleErrors();\r\n            },\r\n\r\n            getFilterValues() {\r\n                let result = {};\r\n\r\n                this.config.filter.forEach(item => {\r\n                    if (item.valueType === 'field') {\r\n                        item.code = 'return ' + item.value + ';';\r\n                        if (this.$root.executeScriptCode(item)) {\r\n                            result[item.value] = item.returnVal.value;\r\n                        } else {\r\n                            result[item.value] = null;\r\n                        }\r\n                    }\r\n                });\r\n\r\n                return JSON.stringify(result);\r\n            },\r\n\r\n            setFocus() {\r\n                if (this.$refs.multiselect) {\r\n                    this.$refs.multiselect.activate();\r\n                }\r\n            }\r\n        },\r\n        template: `\r\n    <div class=\"devbx-webform-field\" :class=\"{'devbx-webform-required': required, 'devbx-webform--is-error': errorMessage.length}\">\r\n        <span class=\"devbx-webform-label\" v-html=\"formLabelFormatted\" v-if=\"!config.labelHidden\">\r\n        </span>\r\n        \r\n        <div class=\"devbx-webform-choice-drop-down\" v-if=\"config.type == 'DROP_DOWN' || config.type == 'DROP_DOWN_PICTURE'\">\r\n            <vue-multiselect\r\n                ref=\"multiselect\"\r\n                :options=\"options\"\r\n                :placeholder=\"config.placeholder\"\r\n                :no-elements-found-text=\"$Bitrix.Loc.getMessage('DEVBX_WEB_FORM_CHOICE_NO_ELEMENTS_FOUND')\"\r\n                :list-is-empty=\"$Bitrix.Loc.getMessage('DEVBX_WEB_FORM_LIST_IS_EMPTY')\"\r\n                @select=\"value = $event.value\"\r\n                :value=\"selectedOption\"\r\n                track-by=\"value\"\r\n                label=\"text\"\r\n                key=\"value\"\r\n                :show-labels=\"false\"\r\n                :disabled=\"readonly\"\r\n            >\r\n            \r\n            <template v-if=\"config.type == 'DROP_DOWN_PICTURE'\" v-slot:singleLabel=\"props\">\r\n                <div class=\"option__image\" v-if=\"config.type == 'DROP_DOWN_PICTURE'\">\r\n                    <img v-if=\"props.option.picture\" :src=\"props.option.picture.thumbnail\" :alt=\"props.option.text\">\r\n                </div>\r\n                <span class=\"option__desc\"><span class=\"option__title\">{{ props.option.text }}</span></span>\r\n            </template>\r\n            \r\n            <template v-if=\"config.type == 'DROP_DOWN_PICTURE'\" v-slot:option=\"props\">\r\n                <div class=\"option__image\" v-if=\"config.type == 'DROP_DOWN_PICTURE'\">\r\n                    <img v-if=\"props.option.picture\" :src=\"props.option.picture.thumbnail\" :alt=\"props.option.text\">\r\n                </div>\r\n                <div class=\"option__desc\"><span class=\"option__title\">{{ props.option.text }}</span></div>\r\n            </template>\r\n            </vue-multiselect>\r\n        </div>    \r\n    \r\n        <div class=\"devbx-webform-helptext\" v-if=\"helpTextFormatted.length>0\" v-html=\"helpTextFormatted\"></div>\r\n\r\n        <transition name=\"devbx-webform-field\">\r\n            <div class=\"devbx-webform-error-message\" v-if=\"errorMessage\" v-html=\"errorMessage\"></div>\r\n        </transition>\r\n    </div>\r\n    `\r\n    });\r\n\r\n});\r\n"],"names":["props","data","mounted","item","component","unmounted","computed","labelFormatted","$root","htmlFormatFields","BX","util","htmlspecialchars","config","label","formLabelFormatted","required","helpTextFormatted","helpText","id","$","uid","readonly","formReadonly","checkCondition","hasCustomError","errorMessage","get","set","value","methods","checkRequired","validation","field","console","error","undefined","length","formatString","$Bitrix","Loc","getMessage","checkCustomError","customError","checkRuleErrors","addCustomEvent","app","store","Vue3","Vuex","createStore","state","sectionResult","mutations","setIblockSectionItems","result","every","sid","fieldId","filter","hasOwnProperty","items","errors","push","reactive","actions","getIblockSectionItems","context","commit","Object","assign","ajax","runAction","lang","message","params","action","then","response","getters","iblockSectionItems","mixins","fieldMixin","isLoading","watch","val","valueFields","option","selectedOption","forEach","fieldName","formField","formFieldByName","changed","parseInt","isNaN","checkPageErrors","filterValues","valueType","code","executeScriptCode","returnVal","singleValue","valuetype","tmp","JSON","stringify","options","systemId","dispatch","valueValid","ID","text","NAME","type","picture","pictureField","checkErrors","getFilterValues","setFocus","$refs","multiselect","activate","template"],"mappings":"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"}