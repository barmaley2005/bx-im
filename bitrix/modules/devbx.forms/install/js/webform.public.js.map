{"version":3,"file":"webform.public.js","sources":["../../srcjs/vue-webform-public/core/public.core.js","../../srcjs/vue-webform-public/core/devbx.webform.mslang.js","../../srcjs/vue-webform-public/core/components/devbx.webform.app.js","../../srcjs/vue-webform-public/core/components/mode/devbx.webform.mode.init.js","../../srcjs/vue-webform-public/core/components/mode/devbx.webform.mode.pages.js","../../srcjs/vue-webform-public/core/components/mode/devbx.webform.mode.finish.page.js","../../srcjs/vue-webform-public/core/components/devbx.webform.header.js","../../srcjs/vue-webform-public/core/components/devbx.webform.page.js","../../srcjs/vue-webform-public/core/components/devbx.webform.form.actions.js","../../srcjs/vue-webform-public/core/components/devbx.webform.form.row.js","../../srcjs/vue-webform-public/core/components/devbx.webform.popup.window.js"],"sourcesContent":["let tmpId = 1;\r\n\r\nexport class WebForm {\r\n\r\n    constructor(config) {\r\n        this.actions = config.formActions;\r\n        this.settings = config.formSettings;\r\n        this.pages = config.pages = new WebFormPages(config.pages);\r\n        this.finishPage = config.finishPage;\r\n        this.finishPageCond = config.finishPageCond;\r\n    }\r\n}\r\n\r\nexport class WebFormPages {\r\n    constructor(pages) {\r\n        this.items = [];\r\n\r\n        pages.forEach((item, index) => {\r\n            pages[index] = new WebFormPage(item);\r\n            this.items.push(pages[index]);\r\n        });\r\n    }\r\n\r\n    getAllFormFields()\r\n    {\r\n        let result = [];\r\n\r\n        this.items.forEach(item => {\r\n            result.push(...item.getAllFormFields());\r\n        });\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class WebFormCollection {\r\n    constructor() {\r\n        this.id = tmpId++;\r\n        this.items = [];\r\n\r\n        this._parent = null;\r\n    }\r\n\r\n    get parent()\r\n    {\r\n        return this._parent;\r\n    }\r\n\r\n    set parent(value)\r\n    {\r\n        this._parent = value;\r\n    }\r\n\r\n    get root()\r\n    {\r\n        let result = this._parent;\r\n\r\n        if (!result)\r\n            return result;\r\n\r\n        while (result.parent)\r\n        {\r\n            result = result.parent;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    getItemById(id) {\r\n        let result = null;\r\n\r\n        this.items.every(item => {\r\n            if (item.id === id)\r\n                result = item;\r\n\r\n            return result === null;\r\n        });\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class WebFormLayout extends WebFormCollection {\r\n    constructor(config, rows) {\r\n        super();\r\n\r\n        this.config = config;\r\n\r\n        rows.forEach((item, index) => {\r\n            rows[index] = new WebFormPageRow(item);\r\n            rows[index].parent = this;\r\n            this.items.push(rows[index]);\r\n        });\r\n    }\r\n\r\n    _getItemsRecursive(items)\r\n    {\r\n        this.items.forEach(row => {\r\n            row.items.forEach(item => {\r\n\r\n                if (item.childLayout)\r\n                {\r\n                    item.childLayout._getItemsRecursive(items);\r\n                }\r\n\r\n                items.push(item);\r\n\r\n            });\r\n        });\r\n    }\r\n\r\n    getAllFormFields()\r\n    {\r\n        let result = [];\r\n\r\n        this._getItemsRecursive(result);\r\n\r\n        return result;\r\n    }\r\n}\r\n\r\nexport class WebFormPage extends WebFormLayout {\r\n    constructor(page) {\r\n        super(page.config, page.rows);\r\n    }\r\n}\r\n\r\nexport class WebFormPageRow extends WebFormCollection {\r\n    constructor(row) {\r\n        super();\r\n\r\n        row.items.forEach((item, index) => {\r\n            row.items[index] = new WebFormFieldItem(item);\r\n            row.items[index].parent = this;\r\n            this.items.push(row.items[index]);\r\n        });\r\n    }\r\n}\r\n\r\nexport class WebFormFieldItem {\r\n    constructor(item) {\r\n        this.id = tmpId++;\r\n        this.size = item.size;\r\n        this.config = item.config;\r\n        this.fieldId = item.fieldId;\r\n        this.component = null;\r\n        this.childLayout = null;\r\n        this.errorMessage = false;\r\n        this._parent = null;\r\n\r\n        if (item.config.layout)\r\n        {\r\n            this.childLayout = new WebFormLayout(this.config.layout.config, this.config.layout.rows);\r\n            this.childLayout.parent = this;\r\n        }\r\n    }\r\n\r\n    get parent()\r\n    {\r\n        return this._parent;\r\n    }\r\n\r\n    set parent(value)\r\n    {\r\n        this._parent = value;\r\n    }\r\n\r\n    get root()\r\n    {\r\n        let result = this._parent;\r\n\r\n        if (!result)\r\n            return result;\r\n\r\n        while (result.parent)\r\n        {\r\n            result = result.parent;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    get rootPage()\r\n    {\r\n        let result = this._parent;\r\n\r\n        if (!result)\r\n            return result;\r\n\r\n        while (!(result instanceof WebFormPage) && result.parent)\r\n        {\r\n            result = result.parent;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n}","export class WebFormStackVariableString extends DevBX.MSLang.StackVariable {\r\n\r\n    constructor(isConst, formField) {\r\n        super(DevBX.MSLang.VariableType.vtString, isConst);\r\n\r\n        this._formField = formField;\r\n    }\r\n\r\n    get functions() {\r\n        return DevBX.MSLang.StackVariableString.prototype.functions;\r\n    }\r\n\r\n    get value() {\r\n        return this._formField.value;\r\n    }\r\n\r\n    set value(value) {\r\n        if (typeof value !== 'string')\r\n            throw new Error('variable type ' + typeof value + ' expected string')\r\n\r\n        this._formField.value = value;\r\n    }\r\n}\r\n\r\nexport class WebFormStackVariableArray extends DevBX.MSLang.StackVariable {\r\n\r\n    constructor(isConst, formField) {\r\n        super(DevBX.MSLang.VariableType.vtArray, isConst);\r\n\r\n        this._formField = formField;\r\n    }\r\n\r\n    get functions() {\r\n        return DevBX.MSLang.StackVariableArray.prototype.functions;\r\n    }\r\n\r\n    get value() {\r\n        return this._formField.value;\r\n    }\r\n\r\n    set value(value) {\r\n        if (!Array.isArray(value))\r\n            throw new Error('variable type ' + typeof value + ' expected array')\r\n\r\n        this._formField.value = value;\r\n    }\r\n}\r\n\r\nexport class WebFormStackVariableDateTimeObject extends DevBX.MSLang.StackVariableDateTimeObject {\r\n    constructor(formField) {\r\n        super(null);\r\n\r\n        this._formField = formField;\r\n    }\r\n\r\n    get value() {\r\n        return this._formField.value;\r\n    }\r\n}\r\n\r\nexport class WebFormStackVariableBoolean extends DevBX.MSLang.StackVariable {\r\n    constructor(formField) {\r\n        super(DevBX.MSLang.VariableType.vtBoolean, true);\r\n\r\n        this._formField = formField;\r\n    }\r\n\r\n    get value() {\r\n        return this._formField.value;\r\n    }\r\n}\r\n\r\nexport class WebFormStackVariableNumber extends DevBX.MSLang.StackVariable {\r\n    constructor(formField) {\r\n        super(DevBX.MSLang.VariableType.vtNumber, true);\r\n\r\n        this._formField = formField;\r\n    }\r\n\r\n    get value() {\r\n        if (typeof this._formField.value !== 'number')\r\n            return null;\r\n\r\n        return this._formField.value;\r\n    }\r\n}\r\n\r\nexport class WebFormStackVariableFieldsObject extends DevBX.MSLang.StackVariable {\r\n    constructor(formFields) {\r\n        super(DevBX.MSLang.VariableType.vtObject, true);\r\n\r\n        this._formFields = formFields;\r\n    }\r\n\r\n    getProperty(name) {\r\n        let formField = undefined;\r\n\r\n        this._formFields.every(search => {\r\n            if (search.name !== name)\r\n                return true;\r\n\r\n            formField = search;\r\n\r\n            return false;\r\n        });\r\n\r\n        if (!formField)\r\n            return undefined;\r\n\r\n        switch (formField.type) {\r\n            case 'string':\r\n                return new WebFormStackVariableString(true, formField);\r\n            case 'array':\r\n            case 'files':\r\n                return new WebFormStackVariableArray(true, formField);\r\n            case 'object':\r\n                return new WebFormStackVariableFieldsObject(formField.value);\r\n            case 'datetime':\r\n            case 'date':\r\n            case 'time':\r\n                return new WebFormStackVariableDateTimeObject(formField)\r\n            case 'boolean':\r\n                return new WebFormStackVariableBoolean(formField);\r\n            case 'number':\r\n                return new WebFormStackVariableNumber(formField);\r\n        }\r\n\r\n        return undefined;\r\n    }\r\n}\r\n","import {WebForm} from \"../public.core\";\r\nimport {WebFormStackVariableFieldsObject} from \"../devbx.webform.mslang\";\r\n\r\nexport function createWebFormApp(data) {\r\n    let app = BX.Vue3.BitrixVue.createApp({\r\n        data() {\r\n            data.webForm.formFields.forEach(item => {\r\n                item.changed = false;\r\n            });\r\n\r\n            return {\r\n                admin: data.admin,\r\n                debug: true,\r\n                sid: data.sid,\r\n                webForm: new WebForm(data.webForm.config),\r\n                formClass: !!data.formClass ? data.formClass : '',\r\n                formElements: data.webForm.formElements,\r\n                formFields: data.webForm.formFields,\r\n                formReadonly: false,\r\n                culture: data.culture,\r\n                activePageId: false,\r\n                activeId: false,\r\n                visiblePages: [],\r\n                beforeTransitionCheckErrors: false,\r\n                pageChange: false,\r\n                submitAjax: false,\r\n                validation: true,\r\n                mode: 'init',\r\n                errors: [],\r\n            };\r\n        },\r\n        mounted() {\r\n            //let time = (new Date()).getTime();\r\n\r\n            let items = Object.values(this.pages);\r\n\r\n            if (items.length) {\r\n                this.visiblePages.push(items[0]);\r\n                this.activePageId = items[0].id;\r\n            }\r\n\r\n            this.mode = 'pages';\r\n\r\n            /*\r\n            if (this.debug)\r\n            {\r\n                console.log('init time ',(new Date()).getTime()-time);\r\n            }*/\r\n        },\r\n        methods: {\r\n            formatString(str, search, replace) {\r\n                if (typeof str === 'undefined')\r\n                    return '';\r\n\r\n                if (typeof str !== 'string')\r\n                    str = str.toString();\r\n\r\n                if (!Array.isArray(search)) {\r\n                    search = [search];\r\n                    replace = [replace];\r\n                }\r\n\r\n                search.forEach((s, i) => {\r\n                    str = str.replaceAll(s, replace[i]);\r\n                });\r\n\r\n                return str;\r\n            },\r\n\r\n            getConditionVariables() {\r\n                let result = {};\r\n\r\n                result['Fields'] = new WebFormStackVariableFieldsObject(this.formFields);\r\n\r\n                return result;\r\n            },\r\n\r\n            executeScriptCode(cond)\r\n            {\r\n                cond.error = false;\r\n\r\n                if (!cond.code)\r\n                    return false;\r\n\r\n                if (!cond.context) {\r\n                    let nodeList = [];\r\n\r\n                    try {\r\n                        const lexer = new DevBX.MSLang.CodeLexer(cond.code);\r\n                        const parser = new DevBX.MSLang.CodeParser(lexer);\r\n\r\n                        parser.parseCode(nodeList, true, true, DevBX.MSLang.LexerTypeArray.one(DevBX.MSLang.LexerType.ltEof));\r\n                    } catch (e) {\r\n                        cond.error = true;\r\n                        cond.message = e.message;\r\n                        return false;\r\n                    }\r\n\r\n                    const interpreter = new DevBX.MSLang.Interpreter();\r\n                    interpreter.registerHandlers();\r\n\r\n                    cond.context = new DevBX.MSLang.ContextInterpreter(nodeList, interpreter);\r\n                }\r\n\r\n                try {\r\n\r\n                    cond.context.reset();\r\n\r\n                    cond.context.registerConst();\r\n                    cond.context.setVariable('DateTime', new DevBX.MSLang.StackVariableDateTimeObject());\r\n\r\n                    let conditionVariables = this.getConditionVariables();\r\n\r\n                    Object.keys(conditionVariables).forEach(key => {\r\n                        cond.context.setVariable(key, conditionVariables[key]);\r\n                    });\r\n\r\n                    cond.returnVal = cond.context.exec(true);\r\n\r\n                    if (!cond.returnVal)\r\n                        return false;\r\n\r\n                    if (cond.returnVal.value === undefined) {\r\n                        cond.error = 'return undefined value';\r\n\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                } catch (e) {\r\n                    cond.error = 'failed execute code: '+e.message;\r\n                    return false;\r\n                }\r\n            },\r\n\r\n            checkCondition(objCondition, props, fieldName) {\r\n                if (props === undefined)\r\n                    debugger;\r\n\r\n                let cond = props[fieldName];\r\n\r\n                switch (cond.value) {\r\n                    case 'always':\r\n                        return true;\r\n                    case 'never':\r\n                        return false;\r\n                    case 'when':\r\n                        break;\r\n                    default:\r\n                        return null;\r\n                }\r\n\r\n                if (!this.executeScriptCode(cond)) {\r\n                    if (cond.error)\r\n                    {\r\n                        console.error('execute condition error, '+cond.error, objCondition, props, fieldName);\r\n                    }\r\n\r\n                    return null;\r\n                }\r\n\r\n                return !!cond.returnVal.value;\r\n            },\r\n\r\n            getComponentsByName(name, childItems) {\r\n                if (typeof childItems === \"undefined\")\r\n                    childItems = this.$children;\r\n\r\n                let component;\r\n\r\n                if (name !== false)\r\n                {\r\n                    component = this.$.appContext.components[name];\r\n                    if (!component) {\r\n                        console.error('Unknown component: ' + name);\r\n                        return;\r\n                    }\r\n                }\r\n\r\n                let result = [];\r\n\r\n                childItems.forEach(item => {\r\n                    if (name === false || item.$.type === component) {\r\n                        result.push(item);\r\n                    }\r\n\r\n                    result.push(...this.getComponentsByName(name, item.$children));\r\n                });\r\n\r\n                return result;\r\n            },\r\n\r\n            getFormElementById(id) {\r\n\r\n                let result = false;\r\n\r\n                this.formElements.forEach(group => {\r\n\r\n                    group.items.forEach(item => {\r\n\r\n                        if (item.data.fieldId === id) {\r\n                            result = item;\r\n                            return false;\r\n                        }\r\n\r\n                        return true;\r\n                    });\r\n\r\n                    return result === false;\r\n\r\n                });\r\n\r\n                return result;\r\n            },\r\n\r\n            htmlFormatFields(html) {\r\n                if (!html)\r\n                    return '';\r\n\r\n                let fields = this.formFieldByName,\r\n                    self = this;\r\n\r\n                html = html.replace(/#([a-zA-Z0-9_\\.]+)#/g, function (str, ind) {\r\n                    let field = fields[ind];\r\n\r\n                    if (!field) {\r\n                        if (self.debug) {\r\n                            return '<b style=\"color:red;\">form field not found ' + BX.util.htmlspecialchars(ind) + '</b>';\r\n                        }\r\n                    }\r\n\r\n                    let value = field.value;\r\n\r\n                    if (value === null || value === undefined)\r\n                        return '';\r\n\r\n                    switch (field.type) {\r\n                        case 'array':\r\n                            value = value.join(', ');\r\n                            break;\r\n                        case 'date':\r\n                            value = parseInt(value);\r\n                            if (!isNaN(value)) {\r\n                                value = (new Date(value * 1000)).toLocaleDateString();\r\n                            } else value = '';\r\n\r\n                            break;\r\n                        case 'datetime':\r\n                            value = parseInt(value);\r\n                            if (!isNaN(value)) {\r\n                                value = (new Date(value * 1000)).toLocaleString();\r\n                            } else value = '';\r\n\r\n                            break;\r\n                        case 'time':\r\n                            value = parseInt(value);\r\n                            if (!isNaN(value)) {\r\n                                let hours = Math.floor(value / (60 * 60)),\r\n                                    minutes = Math.floor((value % (60 * 60)) / 60);\r\n\r\n                                value = hours.toString().padStart(2, '0') + ':' + minutes.toString().padStart(2, '0');\r\n                            } else value = '';\r\n\r\n                            break;\r\n                        case 'boolean':\r\n                            value = value ? BX.message('DEVBX_WEB_FORM_FIELD_BOOLEAN_VALUE_TRUE') : BX.message('DEVBX_WEB_FORM_FIELD_BOOLEAN_VALUE_FALSE');\r\n                            break;\r\n                        case 'files':\r\n\r\n                            let fileNames = [];\r\n\r\n                            value.forEach(file => {\r\n                                fileNames.push(file.name);\r\n                            });\r\n\r\n                            value = fileNames.join(', ');\r\n\r\n                            break;\r\n                    }\r\n\r\n                    return BX.util.htmlspecialchars(value);\r\n                });\r\n\r\n                return html;\r\n            },\r\n\r\n            checkPageFields(forceCheck) {\r\n                let result = [];\r\n\r\n                this.activePageWebFormItems.forEach(item => {\r\n                    if (!item.component)\r\n                        return;\r\n\r\n                    if (!forceCheck)\r\n                    {\r\n                        let field = item.component.field;\r\n\r\n                        if (field && !field.changed)\r\n                            return;\r\n                    }\r\n\r\n                    if (typeof item.component.checkErrors === 'function') {\r\n                        if (item.component.checkErrors()) {\r\n                            result.push(item.component);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                return result;\r\n            },\r\n\r\n            showPrevPage() {\r\n                this.setPageNumber(this.curPageNumber - 1);\r\n            },\r\n\r\n            showNextPage() {\r\n                this.setPageNumber(this.curPageNumber + 1);\r\n            },\r\n\r\n            checkPageErrors(forceCheck, setFocus) {\r\n                let errComponents = this.checkPageFields(forceCheck);\r\n\r\n                if (!errComponents.length)\r\n                    return false;\r\n\r\n                errComponents.forEach(component => {\r\n                    if (component.item) {\r\n                        //fieldsErrors.push(component.item);\r\n                    }\r\n                });\r\n\r\n                if (setFocus) {\r\n                    errComponents[0].$el.scrollIntoView({behavior: \"smooth\"});\r\n                    if (typeof errComponents[0].setFocus === 'function')\r\n                        errComponents[0].setFocus();\r\n                }\r\n\r\n                return true;\r\n            },\r\n\r\n            getFieldsByFieldId(systemId, children)\r\n            {\r\n                let result = [];\r\n\r\n                if (!children)\r\n                    children = this.formFields;\r\n\r\n                children.forEach(field => {\r\n                    if (field.fieldId !== systemId)\r\n                        return;\r\n\r\n                    if (field.type === 'object')\r\n                    {\r\n                        result.push(...this.getFieldsByFieldId(systemId, field.value));\r\n                    } else {\r\n                        result.push(field);\r\n                    }\r\n                });\r\n\r\n                return result;\r\n            },\r\n\r\n            checkPageObjectErrors(page) {\r\n                let hasErrors = false;\r\n\r\n                page.getAllFormFields().every(obField => {\r\n                    if (obField.config.showRule && this.checkCondition(obField, obField.config, 'showRule') === false)\r\n                        return true;\r\n\r\n                    if (obField.config.customError && this.checkCondition(obField, obField.config, 'showCustomError') === true)\r\n                    {\r\n                        hasErrors = true;\r\n                        return false;\r\n                    }\r\n\r\n                    if (obField.config.requireRule && this.checkCondition(obField, obField.config, 'requireRule') === true)\r\n                    {\r\n                        let fields = this.getFieldsByFieldId(obField.config.systemId);\r\n\r\n                        fields.forEach(field => {\r\n                            if (field.virtual)\r\n                                return;\r\n\r\n                            if (typeof field.value === \"number\")\r\n                                return; //ok\r\n\r\n                            if (typeof field.value === \"boolean\" && field.value)\r\n                                return; //ok\r\n\r\n                            if (field.value === \"undefined\" || field.value === null || !field.value.length)\r\n                                hasErrors = true; //not filled\r\n                        });\r\n                    }\r\n                });\r\n\r\n                return hasErrors;\r\n            },\r\n\r\n            setPageNumber(pageNum) {\r\n                if (this.pageChange)\r\n                    return;\r\n\r\n                if (pageNum < 0 || pageNum >= Object.values(this.pages).length) {\r\n                    console.error('invalid page number ' + pageNum);\r\n                    return;\r\n                }\r\n\r\n                let curPageNum = this.curPageNumber;\r\n\r\n                if (curPageNum === pageNum)\r\n                    return;\r\n\r\n                if (pageNum < curPageNum) {\r\n                    this.activePageId = Object.values(this.pages)[pageNum].id;\r\n\r\n                    this.visiblePages.splice(0, 0, Object.values(this.pages)[pageNum]);\r\n\r\n                    let self = this;\r\n\r\n                    setTimeout(function () {\r\n                        self.visiblePages.splice(1, 1);\r\n                    }, 0);\r\n\r\n                    return;\r\n                }\r\n\r\n                if (this.checkPageErrors(true, true))\r\n                    return;\r\n\r\n                this.beforeTransitionCheckErrors = false;\r\n\r\n                if (pageNum - curPageNum > 1) {\r\n\r\n                    let hasErrors = false;\r\n\r\n                    while (curPageNum < pageNum) {\r\n                        curPageNum++;\r\n\r\n                        let page = Object.values(this.pages)[curPageNum];\r\n\r\n                        hasErrors = this.checkPageObjectErrors(page);\r\n\r\n                        if (hasErrors) {\r\n                            this.beforeTransitionCheckErrors = true;\r\n                            break;\r\n                        }\r\n\r\n                        curPageNum++;\r\n                    }\r\n\r\n                    if (hasErrors)\r\n                        pageNum = curPageNum;\r\n                }\r\n\r\n                this.activePageId = Object.values(this.pages)[pageNum].id;\r\n\r\n                this.visiblePages.push(Object.values(this.pages)[pageNum]);\r\n                this.visiblePages.splice(0, 1);\r\n            },\r\n\r\n            getObjectFieldTree(varName, fields) {\r\n                let result = {},\r\n                    prefix = varName.length ? varName+'.' : '';\r\n\r\n                fields.forEach(field => {\r\n\r\n                    if (field.type === 'object') {\r\n                        Object.assign(result, this.getObjectFieldTree(prefix + field.name, field.value));\r\n                    } else {\r\n                        result[prefix + field.name] = field;\r\n                    }\r\n                });\r\n\r\n                return result;\r\n            },\r\n\r\n            showFormError(message)\r\n            {\r\n                //conso\r\n            },\r\n        },\r\n        computed: {\r\n            pages() {\r\n                let result = {};\r\n\r\n                this.webForm.pages.items.forEach((page, index) => {\r\n                    if (this.checkCondition(page, page.config, 'showPage') !== false) {\r\n                        result[page.id] = page;\r\n                    }\r\n                });\r\n\r\n                return result;\r\n            },\r\n\r\n            curPageNumber() {\r\n                return Object.values(this.pages).indexOf(this.activePage);\r\n            },\r\n\r\n            activePage() {\r\n                return this.pages[this.activePageId];\r\n            },\r\n\r\n            formFieldByName() {\r\n                return this.getObjectFieldTree('Fields', this.formFields);\r\n            },\r\n\r\n            isPopup() {\r\n                return this.formClass.indexOf('popup')>0;\r\n            },\r\n\r\n            activePageWebFormItems() {\r\n\r\n                let result = [],\r\n                    page = this.activePage;\r\n\r\n                if (!page)\r\n                    return result;\r\n\r\n                return page.getAllFormFields();\r\n            },\r\n\r\n            webFormComponent()\r\n            {\r\n                return 'devbx-webform-mode-'+this.mode;\r\n            },\r\n        },\r\n        watch: {\r\n            validation(val) {\r\n                this.checkPageFields(true);\r\n            },\r\n        },\r\n        template: `\r\n        <div class=\"devbx-webform-clean-css\">\r\n            <component :is=\"webFormComponent\"></component>\r\n            \r\n            <devbx-webform-popup-window v-if=\"errors.length\" @close=\"errors = [];\">\r\n                <div class=\"devbx-webform-error\" v-for=\"error in errors\">\r\n                    <span v-if=\"error.message\">{{error.message}}</span>\r\n                    <span v-else>{{error}}</span>                                \r\n                </div>                            \r\n            </devbx-webform-popup-window>\r\n        </div>\r\n        `,\r\n    });\r\n\r\n    BX.onCustomEvent('DevBxWebFormCreated', [app]);\r\n\r\n    return app;\r\n}","BX.addCustomEvent(\"DevBxWebFormCreated\", function(app) {\r\n\r\n    app.component('devbx-webform-mode-init', {\r\n        template: `\r\n        <div style=\"display: none\">\r\n            <devbx-webform-page\r\n                v-for=\"page in $root.webForm.pages.items\" \r\n                :key=\"page.id\"\r\n                :page=\"page\" \r\n                :is-active=\"false\"\r\n                :disable-actions=\"true\"\r\n            ></devbx-webform-page>            \r\n        </div>\r\n        `\r\n    });\r\n});","BX.addCustomEvent(\"DevBxWebFormCreated\", function(app) {\r\n\r\n    app.component('devbx-webform-mode-pages', {\r\n        data() {\r\n            return {\r\n            };\r\n        },\r\n        computed: {\r\n            webFormItemsBySid() {\r\n\r\n                let result = {};\r\n\r\n                this.$root.webForm.pages.getAllFormFields().forEach(item => {\r\n                    if (item.config && item.config.systemId)\r\n                        result[item.config.systemId] = item;\r\n                });\r\n\r\n                return result;\r\n            },\r\n\r\n        },\r\n        methods: {\r\n            beforeEnter(el) {\r\n                this.$root.pageChange = true;\r\n\r\n                if (this.$root.beforeTransitionCheckErrors) {\r\n                    this.$root.checkPageErrors(false, false);\r\n                }\r\n\r\n                el.style.width = this.$refs.content.clientWidth + 'px';\r\n\r\n                let height = this.calcChildNodesHeight(this.$refs.pagesTransition.$el.querySelector('.devbx-webform-page').childNodes);\r\n                this.$refs.pagesTransition.$el.style.minHeight = height+'px';\r\n            },\r\n\r\n            calcChildNodesHeight(childNodes)\r\n            {\r\n                let height = 0;\r\n\r\n                childNodes.forEach(node => {\r\n                    if (node instanceof Element)\r\n                        height += node.getBoundingClientRect().height;\r\n                });\r\n\r\n                return height;\r\n            },\r\n\r\n            enter(el) {\r\n                let r1 = this.$el.getBoundingClientRect(),\r\n                    r2 = el.getBoundingClientRect();\r\n\r\n                //let setHeight = getComputedStyle(el.closest('.devbx-webform-content')).display === 'flex';\r\n                let setHeight = !this.isPopup;\r\n\r\n                if (r1.y < 0) {\r\n                    this.$el.scrollIntoView({behavior: \"smooth\"});\r\n                }\r\n\r\n                let height = this.calcChildNodesHeight(this.$refs.pagesTransition.$el.querySelector('.devbx-webform-page-transition-enter-active').childNodes);\r\n                this.$refs.pagesTransition.$el.style.minHeight = height+'px';\r\n\r\n                //el.parentNode.style.overflow = 'hidden';\r\n\r\n                /*\r\n                let height = 0;\r\n\r\n                this.$refs.pagesTransition.$el.childNodes.forEach(node => {\r\n\r\n                    if (node instanceof Element)\r\n                    {\r\n                        height = Math.max(height, this.calcChildNodesHeight(node.childNodes));\r\n                    }\r\n                });\r\n\r\n                el.parentNode.style.position = 'relative';\r\n                el.parentNode.style.overflow = 'hidden';\r\n                el.parentNode.style.display = 'block';\r\n\r\n                if (!setHeight)\r\n                    el.parentNode.style.height = height + 'px';\r\n                 */\r\n            },\r\n\r\n            afterEnter(el) {\r\n                el.style.width = '';\r\n\r\n                el.parentNode.removeAttribute('style');\r\n\r\n                this.$refs.pagesTransition.$el.childNodes.forEach(node => {\r\n                    if (node instanceof Element) {\r\n                        node.removeAttribute('style');\r\n                    }\r\n                });\r\n\r\n\r\n                this.$root.pageChange = false;\r\n\r\n                if (this.$root.beforeTransitionCheckErrors) {\r\n                    this.$root.beforeTransitionCheckErrors = false;\r\n\r\n                    this.$root.checkPageErrors(true, true);\r\n                } else {\r\n\r\n                    this.$root.activePageWebFormItems.every(item => {\r\n                        if (item.component)\r\n                        {\r\n                            if (typeof item.component.setFocus === 'function') {\r\n                                item.component.setFocus();\r\n                                return false;\r\n                            }\r\n                        }\r\n\r\n                        return true;\r\n                    });\r\n                }\r\n            },\r\n\r\n            submitForm(action) {\r\n                if (this.$root.submitAjax)\r\n                    return;\r\n\r\n                let tree = this.$root.getObjectFieldTree('', this.$root.formFields);\r\n\r\n                let webFormData = {};\r\n\r\n                Object.keys(tree).forEach(fieldName => {\r\n                    let field = tree[fieldName],\r\n                        value = field.value;\r\n\r\n                    if (field.type === 'files')\r\n                    {\r\n                        let newValue = [];\r\n\r\n                        value.forEach(fileInfo => {\r\n                            newValue.push(fileInfo.fileId);\r\n                        });\r\n\r\n                        value = newValue;\r\n                    }\r\n\r\n                    webFormData[fieldName] = value;\r\n                });\r\n\r\n                this.$root.submitAjax = true;\r\n\r\n                BX.ajax.runAction('devbx:forms.api.webform.submitForm', {\r\n                    data: {\r\n                        lang: BX.message('LANGUAGE_ID'),\r\n                        sid: this.$root.sid,\r\n                        fields: JSON.stringify(webFormData),\r\n                    }\r\n                }).then(\r\n                    BX.delegate(this.submitFormSuccess, this),\r\n                    BX.delegate(this.submitFormError, this),\r\n                );\r\n            },\r\n\r\n            submitFormSuccess(response)\r\n            {\r\n                this.$root.submitAjax = false;\r\n                this.$root.mode = 'finish-page';\r\n            },\r\n\r\n            submitFormError(response)\r\n            {\r\n                this.$root.submitAjax = false;\r\n\r\n                let firstErrItem = false;\r\n\r\n                response.errors.forEach(error => {\r\n\r\n                    if (error.customData && error.customData.fieldId)\r\n                    {\r\n                        let obField = this.webFormItemsBySid[error.customData.fieldId];\r\n\r\n                        if (obField)\r\n                        {\r\n                            if (!firstErrItem)\r\n                                firstErrItem = obField;\r\n\r\n                            obField.errorMessage = error.message;\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    this.$root.errors.push(error);\r\n                });\r\n\r\n                if (firstErrItem)\r\n                {\r\n                    if (firstErrItem.rootPage)\r\n                    {\r\n                        let pageNum = Object.values(this.$root.pages).indexOf(firstErrItem.rootPage);\r\n\r\n                        if (pageNum>=0)\r\n                        {\r\n                            this.$root.setPageNumber(pageNum);\r\n                        } else {\r\n                            //TODO ошибка на скрытой странице\r\n                        }\r\n\r\n                    } else {\r\n                        //TODO не удалось найти страницу элемента\r\n                    }\r\n\r\n                } else {\r\n                    if (!this.$root.errors.length)\r\n                    {\r\n                        //TODO заменить на сообщений о неизвестной ошибке\r\n                        this.$root.errors.push('UNKNOWN ERROR');\r\n                    }\r\n                }\r\n            },\r\n        },\r\n        template: `\r\n        <form class=\"devbx-webform-theme devbx-webform\"\r\n            :class=\"$root.formClass\" \r\n            @submit.stop.prevent>\r\n            <div class=\"devbx-webform-container\">\r\n                <div ref=\"content\" class=\"devbx-webform-content\">\r\n                    <devbx-webform-header :form-settings=\"$root.webForm.settings\" :pages=\"$root.pages\" :active-page=\"$root.activePage\"></devbx-webform-header>\r\n                    <div class=\"devbx-webform-body\">\r\n                    <transition-group name=\"devbx-webform-page-transition\" tag=\"div\" \r\n                        class=\"devbx-webform-pages-container\"\r\n                        :class=\"{'devbx-webform-pages-transition': $root.pageChange}\"\r\n                        ref=\"pagesTransition\"\r\n                          @before-enter=\"beforeEnter\"\r\n                          @enter=\"enter\"\r\n                          @after-enter=\"afterEnter\"\r\n                    >\r\n                        <devbx-webform-page\r\n                            v-for=\"page in $root.visiblePages\" \r\n                            :key=\"page.id\"\r\n                            :page=\"page\" \r\n                            :is-active=\"$root.activePageId == page.id\"\r\n                            :disable-actions=\"$root.submitAjax\"\r\n                            @submit-form=\"submitForm()\"\r\n                            >\r\n                        </devbx-webform-page>\r\n                    </transition-group>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n        `\r\n    });\r\n});","BX.addCustomEvent(\"DevBxWebFormCreated\", function(app) {\r\n    app.component('devbx-webform-mode-finish-page', {\r\n\r\n        computed: {\r\n            finishPage() {\r\n                let page = false;\r\n\r\n                this.$root.webForm.finishPageCond.every(pageCond => {\r\n\r\n                    if (this.$root.checkCondition(pageCond, pageCond, 'showRule') === true)\r\n                    {\r\n                        page = pageCond;\r\n                    }\r\n\r\n                    return page === false;\r\n                });\r\n\r\n                if (!page)\r\n                    page = this.$root.webForm.finishPage;\r\n\r\n                return page;\r\n            },\r\n        },\r\n\r\n        template: `\r\n        <div class=\"devbx-webform-theme devbx-webform devbx-webform-finish-page\"\r\n            :class=\"$root.formClass\">\r\n            <div class=\"devbx-webform-container\">\r\n                <div class=\"devbx-webform-content\">\r\n                    <div class=\"devbx-webform-finish-page-content\" v-html=\"finishPage.content\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        `\r\n    });\r\n});","import './devbx.webform.header.css';\r\n\r\nBX.addCustomEvent(\"DevBxWebFormCreated\", function(app) {\r\n    app.component('devbx-webform-header', {\r\n        props: ['formSettings', 'pages', 'activePage'],\r\n        computed: {\r\n            titleFormatted() {\r\n                return this.$root.htmlFormatFields(BX.util.htmlspecialchars(this.formSettings.title));\r\n            },\r\n\r\n            descriptionFormatted() {\r\n                return this.$root.htmlFormatFields(this.formSettings.description);\r\n            },\r\n\r\n            pageDescriptionFormatted() {\r\n                if (this.activePage)\r\n                    return this.$root.htmlFormatFields(this.activePage.config.pageDescription);\r\n\r\n                return '';\r\n            },\r\n\r\n            progressPercent() {\r\n                let idx = Object.values(this.pages).indexOf(this.activePage);\r\n\r\n                if (!this.activePage || idx < 0)\r\n                    return 0;\r\n\r\n                if (idx === this.pageItems.length - 1)\r\n                    return 100;\r\n\r\n                return (100 / this.pageItems.length) * (idx + 1);\r\n            },\r\n\r\n            pageItems() {\r\n\r\n                let result = [],\r\n                    passed = true;\r\n\r\n                Object.values(this.pages).forEach((page, index) => {\r\n\r\n                    let title;\r\n\r\n                    if (page.config.pageTitle) {\r\n                        title = page.config.pageTitle;\r\n                    } else {\r\n                        title = this.$root.formatString(this.$Bitrix.Loc.getMessage('DEVBX_WEB_FORM_NAVIGATION_PAGE_TITLE'), '#NUM#', index + 1);\r\n                    }\r\n\r\n                    if (page.id == this.activePage.id)\r\n                        passed = false;\r\n\r\n                    result.push({\r\n                        title: title,\r\n                        page: page,\r\n                        passed: passed,\r\n                    });\r\n                });\r\n\r\n                return result;\r\n            },\r\n\r\n        },\r\n        template: `\r\n    <div class=\"devbx-webform-header\">\r\n        <h1 v-if=\"!formSettings.titleHidden\" v-html=\"titleFormatted\"></h1>\r\n        <div class=\"devbx-webform-description\" v-if=\"descriptionFormatted.length\" v-html=\"descriptionFormatted\"></div>\r\n        \r\n            <div class=\"devbx-webform-page-steps\"\r\n                :class=\"{'devbx-webform-page-steps-no-title': !formSettings.showPageTitles}\" \r\n                v-if=\"pageItems.length>1 && formSettings.progressBar == 'STEPS'\">\r\n                <ul>\r\n                    <li v-for=\"(item, index) in pageItems\" :class=\"{'devbx-webform-page-step-active': item.page.id == activePage.id}\">\r\n                        <a href @click.stop.prevent=\"$root.setPageNumber(index)\"><span v-if=\"formSettings.showPageTitles\">{{item.title}}</span></a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        \r\n            <div class=\"devbx-webform-page-progress-bar\" v-if=\"pageItems.length>1 && formSettings.progressBar == 'BAR'\">\r\n                <ul>\r\n                    <li class=\"devbx-webform-progress-bar-line\"></li>\r\n                    <li class=\"devbx-webform-progress-bar-pos\" :style=\"{'width': progressPercent+'%'}\"></li>\r\n                    <li v-for=\"(item, index) in pageItems\" :style=\"{'width': (100/pageItems.length)+'%'}\" :class=\"{\r\n                    'devbx-webform-page-step-active': item.page.id == activePage.id && formSettings.showPageTitles,\r\n                    'devbx-webform-page-step-passed': item.passed || (item.page.id == activePage.id && !formSettings.showPageTitles),\r\n                    }\">\r\n                        <a href @click.stop.prevent=\"$root.setPageNumber(index)\"><span v-if=\"formSettings.showPageTitles\">{{item.title}}</span></a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            \r\n            <div class=\"devbx-webform-description\" v-if=\"pageDescriptionFormatted.length\" v-html=\"pageDescriptionFormatted\"></div>\r\n        \r\n    </div>\r\n    `\r\n    });\r\n});","import './devbx.webform.page.css'\r\n\r\nBX.addCustomEvent(\"DevBxWebFormCreated\", function(app) {\r\n    app.component('devbx-webform-page', {\r\n        props: ['page', 'isActive', 'disableActions'],\r\n        data() {\r\n            return {\r\n                rows: [],\r\n            }\r\n        },\r\n        computed: {\r\n            isLoading() {\r\n                let loading = false;\r\n\r\n                this.page.getAllFormFields().forEach(item => {\r\n                    if (item.component && item.component.isLoading)\r\n                        loading = true;\r\n                });\r\n\r\n                return loading;\r\n            },\r\n        },\r\n        directives: {\r\n            row: {\r\n                inserted(el, binding, vnode) {\r\n                    vnode.componentInstance.$parent.rows.push(vnode.componentInstance);\r\n                },\r\n\r\n                unbind(el, binding, vnode) {\r\n                    let idx = vnode.componentInstance.$parent.rows.indexOf(vnode.componentInstance);\r\n\r\n                    if (idx >= 0)\r\n                        vnode.componentInstance.$parent.rows.splice(idx, 1);\r\n                }\r\n            },\r\n        },\r\n        template: `\r\n            <div class=\"devbx-webform-page\" :class=\"{'devbx-webform-page-active': isActive}\">\r\n                    <devbx-webform-form-row ref=\"rows\" v-row v-for=\"(row, index) in page.items\" :key=\"row.id\" v-bind:row=\"row\"/>\r\n                    <devbx-webform-form-actions :page=\"page\" :form-actions=\"$root.webForm.actions\" :disable-actions=\"disableActions\"\r\n                    @submit-form=\"$emit('submit-form')\"\r\n                    ></devbx-webform-form-actions>\r\n                    <div v-if=\"isLoading\" class=\"devbx-webform-page-loading\">\r\n                        <div class=\"devbx-webform-page-lds-roller\"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>                    \r\n                    </div>\r\n            </div>\r\n    `\r\n    });\r\n});","BX.addCustomEvent(\"DevBxWebFormCreated\", function(app) {\r\n    app.component('devbx-webform-form-actions', {\r\n        props: {\r\n            formActions: {\r\n                required: true,\r\n            },\r\n            page: {\r\n                required: true,\r\n            },\r\n            disableActions: {\r\n                default: false,\r\n            },\r\n        },\r\n        emits: ['submit-form'],\r\n        computed: {\r\n            showPrevButton() {\r\n                let pages = Object.values(this.$root.pages);\r\n\r\n                return pages.indexOf(this.page) > 0;\r\n            },\r\n            hasNextButton() {\r\n                let pages = Object.values(this.$root.pages);\r\n\r\n                return pages.indexOf(this.page) < pages.length - 1;\r\n            },\r\n            showNextButton() {\r\n                return this.hasNextButton && this.$root.checkCondition(this.page, this.page.config, 'showNextButton') !== false;\r\n            },\r\n\r\n            submitActions() {\r\n\r\n                let result = [];\r\n\r\n                if (this.hasNextButton)\r\n                    return result;\r\n\r\n                this.formActions.forEach(item => {\r\n                    if (item.action === 'SUBMIT') {\r\n                        result.push(item);\r\n                    }\r\n                });\r\n\r\n                return result;\r\n            },\r\n        },\r\n        template: `\r\n    <div class=\"devbx-webform-navigation\">\r\n        <button class=\"devbx-webform-button\"\r\n            :class=\"{'devbx-webform-button-disabled': disableActions}\" \r\n            v-if=\"showPrevButton\" @click.stop.prevent=\"$root.showPrevPage\">\r\n            <span>{{page.config.prevButtonText}}</span>        \r\n        </button>    \r\n\r\n        <button class=\"devbx-webform-button devbx-webform-button-primary\" \r\n            :class=\"{'devbx-webform-button-disabled': disableActions}\" \r\n            v-if=\"showNextButton\" @click.stop.prevent=\"$root.showNextPage\">\r\n            <span>{{page.config.nextButtonText}}</span>        \r\n        </button>\r\n\r\n        <button v-for=\"(action, index) in submitActions\" :key=\"index\" \r\n            class=\"devbx-webform-button devbx-webform-button-primary\" \r\n            :class=\"{'devbx-webform-button-disabled': disableActions}\" \r\n           @click.stop.prevent=\"$emit('submit-form', action)\">\r\n            <span v-if=\"!$root.submitAjax\">{{action.title}}</span>        \r\n            <span v-else class=\"devbx-webform-button-svg-icon devbx-webform-animation-rotate\">\r\n                    <svg viewBox=\"0 0 118.04 122.88\">\r\n                        <path d=\"M16.08,59.26A8,8,0,0,1,0,59.26a59,59,0,0,1,97.13-45V8a8,8,0,1,1,16.08,0V33.35a8,8,0,0,1-8,8L80.82,43.62a8,8,0,1,1-1.44-15.95l8-.73A43,43,0,0,0,16.08,59.26Zm22.77,19.6a8,8,0,0,1,1.44,16l-10.08.91A42.95,42.95,0,0,0,102,63.86a8,8,0,0,1,16.08,0A59,59,0,0,1,22.3,110v4.18a8,8,0,0,1-16.08,0V89.14h0a8,8,0,0,1,7.29-8l25.31-2.3Z\"/>\r\n                    </svg>            \r\n            </span>\r\n        </button>\r\n    </div>\r\n    `\r\n    });\r\n});","import './devbx.webform.form.row.css';\r\n\r\nBX.addCustomEvent(\"DevBxWebFormCreated\", function(app) {\r\n    app.component('devbx-webform-form-row', {\r\n        props: ['row'],\r\n        data() {\r\n            return {\r\n                hoverId: false,\r\n            };\r\n        },\r\n        methods: {\r\n            elementClick(itemId) {\r\n                this.$root.activeId = itemId;\r\n            },\r\n\r\n            mouseEnter(item) {\r\n                this.hoverId = item.id;\r\n            },\r\n\r\n            mouseLeave(item) {\r\n                if (this.hoverId == item.id) {\r\n                    this.hoverId = false;\r\n                }\r\n            },\r\n\r\n            beforeEnter: function (el) {\r\n                el.style.opacity = 0;\r\n                el.style.height = 0;\r\n            },\r\n            afterEnter: function (el) {\r\n                el.style.height = '';\r\n                el.style.opacity = '';\r\n            },\r\n            enter: function (el, done) {\r\n\r\n                el.style.width = getComputedStyle(el).width;\r\n                el.style.position = 'absolute';\r\n                el.style.visibility = 'hidden';\r\n                el.style.height = 'auto';\r\n\r\n                let height = getComputedStyle(el).height;\r\n\r\n                el.style.width = null;\r\n                el.style.position = null;\r\n                el.style.visibility = null;\r\n                el.style.height = 0;\r\n\r\n\r\n                setTimeout(function () {\r\n                    Velocity(\r\n                        el,\r\n                        {opacity: 1, height: height},\r\n                        {complete: done}\r\n                    )\r\n                }, 100)\r\n            },\r\n            leave: function (el, done) {\r\n                setTimeout(function () {\r\n                    Velocity(\r\n                        el,\r\n                        {opacity: 0, height: 0},\r\n                        {complete: done}\r\n                    )\r\n                }, 100)\r\n            }\r\n\r\n        },\r\n        computed: {\r\n            items() {\r\n                let result = [];\r\n\r\n                this.row.items.forEach(item => {\r\n                    let formElement = this.$root.getFormElementById(item.fieldId);\r\n\r\n                    if (!formElement) {\r\n                        if (this.$root.debug) {\r\n                            console.error('form element not found ' + item.fieldId);\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    let visible = true;\r\n\r\n                    if (item.config.showRule) {\r\n                        visible = !(this.$root.checkCondition(item, item.config, 'showRule') === false);\r\n                    }\r\n\r\n                    if (parseInt(item.config.systemId) <= 0) {\r\n                        console.error('item.config.systemId', item.config.systemId);\r\n                    }\r\n\r\n                    if (!visible)\r\n                        return;\r\n\r\n                    let data = {\r\n                        id: item.config.systemId,\r\n                        template: formElement.data.layoutTemplate,\r\n                        data: item,\r\n                        cssClass: 'devbx-webform--col devbx-webform--col--' + item.size,\r\n                        visible: visible,\r\n                    };\r\n\r\n                    result.push(data);\r\n                });\r\n\r\n                return result;\r\n            },\r\n\r\n            activeId() {\r\n                return this.$root.activeId;\r\n            },\r\n        },\r\n\r\n        template: `\r\n      <transition-group name=\"devbx-webform-field\" tag=\"div\" class=\"devbx-webform-row devbx-webform-transition\"\r\n      v-bind:css=\"false\"\r\n      @before-enter=\"beforeEnter\"\r\n      @after-enter=\"afterEnter\"\r\n      @enter=\"enter\"\r\n      @leave=\"leave\">\r\n          <component\r\n              v-for=\"(item,index) of items\" \r\n              :key=\"item.id\" \r\n              :class=\"item.cssClass\"\r\n              @click=\"elementClick(item.id)\"\r\n              @mouseenter=\"mouseEnter(item)\"\r\n              @mouseleave=\"mouseLeave(item)\"                             \r\n              :is=\"item.template\"\r\n              :item=\"item.data\" \r\n              :config=\"item.data.config\" \r\n              :row=\"row\" \r\n              :active=\"activeId == item.id\"\r\n              />\r\n      </transition-group>\r\n    `\r\n    });\r\n});","import './devbx.webform.popup.window.css';\r\n\r\nBX.addCustomEvent(\"DevBxWebFormCreated\", function(app) {\r\n    app.component('devbx-webform-popup-window', {\r\n        props: {\r\n            contentCenter: {\r\n                type: Boolean,\r\n                default: true,\r\n            },\r\n        },\r\n        data() {\r\n            return {\r\n                elOverlay: false,\r\n                eventKeyup: false,\r\n            };\r\n        },\r\n        mounted() {\r\n            this.elOverlay = document.createElement('div');\r\n            this.elOverlay.classList.add('devbx-webform-popup-overlay');\r\n            this.elOverlay.setAttribute('style', 'z-index: 1050 !important');\r\n            this.elOverlay.addEventListener('click', BX.delegate(this.overlayClick, this));\r\n\r\n            document.body.appendChild(this.elOverlay);\r\n            document.body.appendChild(this.$el);\r\n\r\n            this.eventKeyup = BX.delegate(this.keyUp, this);\r\n            document.addEventListener('keyup', this.eventKeyup);\r\n        },\r\n        beforeUnmount() {\r\n            this.elOverlay.remove();\r\n            document.removeEventListener('keyup', this.eventKeyup);\r\n        },\r\n        methods: {\r\n            overlayClick()\r\n            {\r\n                this.$emit('close');\r\n            },\r\n\r\n            popupWindowClick(event)\r\n            {\r\n                if (event.target == this.$el)\r\n                    this.$emit('close');\r\n            },\r\n\r\n            keyUp(event)\r\n            {\r\n                if (event.keyCode == 27)\r\n                    this.$emit('close');\r\n            }\r\n        },\r\n        template: `\r\n        <div class=\"devbx-webform-theme devbx-webform-popup-window\" style=\"z-index: 1055 !important;\" @click=\"popupWindowClick($event)\">\r\n            <div class=\"devbx-webform-popup-container\">\r\n                <div class=\"devbx-webform-popup-close\" @click.stop.prevent=\"$emit('close')\"></div>\r\n                <div class=\"devbx-webform-popup-content\" :class=\"{'devbx-webform-popup-content-center': contentCenter}\">\r\n                    <slot></slot>\r\n                </div>\r\n                <div class=\"devbx-webform-popup-buttons\">\r\n                    <div class=\"devbx-webform-popup-button devbx-webform-popup-button-primary\" @click.stop.prevent=\"$emit('close')\">\r\n                        <span>Close</span>\r\n                    </div>                \r\n                </div>\r\n            </div>\r\n        </div>\r\n        `\r\n    });\r\n});"],"names":["tmpId","WebForm","config","actions","formActions","settings","formSettings","pages","WebFormPages","finishPage","finishPageCond","items","forEach","item","index","WebFormPage","push","result","getAllFormFields","WebFormCollection","id","_parent","every","value","parent","WebFormLayout","rows","WebFormPageRow","row","childLayout","_getItemsRecursive","page","WebFormFieldItem","size","fieldId","component","errorMessage","layout","WebFormStackVariableString","isConst","formField","DevBX","MSLang","VariableType","vtString","_formField","StackVariableString","prototype","functions","Error","StackVariable","WebFormStackVariableArray","vtArray","StackVariableArray","Array","isArray","WebFormStackVariableDateTimeObject","StackVariableDateTimeObject","WebFormStackVariableBoolean","vtBoolean","WebFormStackVariableNumber","vtNumber","WebFormStackVariableFieldsObject","formFields","vtObject","_formFields","name","undefined","search","type","createWebFormApp","data","app","BX","Vue3","BitrixVue","createApp","webForm","changed","admin","debug","sid","formClass","formElements","formReadonly","culture","activePageId","activeId","visiblePages","beforeTransitionCheckErrors","pageChange","submitAjax","validation","mode","errors","mounted","Object","values","length","methods","formatString","str","replace","toString","s","i","replaceAll","getConditionVariables","executeScriptCode","cond","error","code","context","nodeList","lexer","CodeLexer","parser","CodeParser","parseCode","LexerTypeArray","one","LexerType","ltEof","e","message","interpreter","Interpreter","registerHandlers","ContextInterpreter","reset","registerConst","setVariable","conditionVariables","keys","key","returnVal","exec","checkCondition","objCondition","props","fieldName","console","getComponentsByName","childItems","$children","$","appContext","components","getFormElementById","group","htmlFormatFields","html","fields","formFieldByName","self","ind","field","util","htmlspecialchars","join","parseInt","isNaN","Date","toLocaleDateString","toLocaleString","hours","Math","floor","minutes","padStart","fileNames","file","checkPageFields","forceCheck","activePageWebFormItems","checkErrors","showPrevPage","setPageNumber","curPageNumber","showNextPage","checkPageErrors","setFocus","errComponents","$el","scrollIntoView","behavior","getFieldsByFieldId","systemId","children","checkPageObjectErrors","hasErrors","obField","showRule","customError","requireRule","virtual","pageNum","curPageNum","splice","setTimeout","getObjectFieldTree","varName","prefix","assign","showFormError","computed","indexOf","activePage","isPopup","webFormComponent","watch","val","template","onCustomEvent","addCustomEvent","webFormItemsBySid","$root","beforeEnter","el","style","width","$refs","content","clientWidth","height","calcChildNodesHeight","pagesTransition","querySelector","childNodes","minHeight","node","Element","getBoundingClientRect","enter","r1","r2","setHeight","y","afterEnter","parentNode","removeAttribute","submitForm","action","tree","webFormData","newValue","fileInfo","fileId","ajax","runAction","lang","JSON","stringify","then","delegate","submitFormSuccess","submitFormError","response","firstErrItem","customData","rootPage","pageCond","titleFormatted","title","descriptionFormatted","description","pageDescriptionFormatted","pageDescription","progressPercent","idx","pageItems","passed","pageTitle","$Bitrix","Loc","getMessage","isLoading","loading","directives","inserted","binding","vnode","componentInstance","$parent","unbind","required","disableActions","emits","showPrevButton","hasNextButton","showNextButton","submitActions","hoverId","elementClick","itemId","mouseEnter","mouseLeave","opacity","done","getComputedStyle","position","visibility","Velocity","complete","leave","formElement","visible","layoutTemplate","cssClass","contentCenter","Boolean","elOverlay","eventKeyup","document","createElement","classList","add","setAttribute","addEventListener","overlayClick","body","appendChild","keyUp","beforeUnmount","remove","removeEventListener","$emit","popupWindowClick","event","target","keyCode"],"mappings":"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"}