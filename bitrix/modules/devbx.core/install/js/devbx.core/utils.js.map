{"version":3,"file":"utils.js","sources":["../../../srcjs/utils/utils.js"],"sourcesContent":["export function filterObjectsArray(filter, items, options) {\n    let i, j, result, found, item, paramName, op, negative, cmp,\n        callback = false;\n\n    let operations = ['=', '!', '~', '!~', '[]', '![]', '<', '>', '<=', '>=', '!>', '!<', '!>=', '!<=', '@', '!@'];\n\n    if (options === true) {\n        options = {single: true};\n    } else if (typeof options !== 'object') {\n        options = {};\n    }\n\n    let single = options.single === true,\n        byKey = options.byKey === true,\n        excludeKeys = [];\n\n    if (options.hasOwnProperty('excludeKeys'))\n        excludeKeys = Object.values(options.excludeKeys);\n\n    if (options.hasOwnProperty('result')) {\n        result = options.result;\n    } else {\n        if (byKey) {\n            result = {};\n        } else {\n            result = [];\n        }\n    }\n\n    if (typeof options.callback === 'function')\n        callback = options.callback;\n\n    for (i in items) {\n        if (excludeKeys.indexOf(i) !== -1)\n            continue;\n\n        if (!items.hasOwnProperty(i))\n            continue;\n\n        item = items[i];\n\n        found = true;\n\n        for (j in filter) {\n            if (!filter.hasOwnProperty(j))\n                continue;\n\n            paramName = j;\n\n            if (operations.indexOf(paramName.substring(0, 3)) !== -1) {\n                op = paramName.substring(0, 3);\n                paramName = paramName.substring(3);\n            } else if (operations.indexOf(paramName.substring(0, 2)) !== -1) {\n                op = paramName.substring(0, 2);\n                paramName = paramName.substring(2);\n            } else if (operations.indexOf(paramName.substring(0, 1)) !== -1) {\n                op = paramName.substring(0, 1);\n                paramName = paramName.substring(1);\n            } else {\n                op = '=';\n            }\n\n            negative = false;\n\n            if (op.substring(0, 1) == '!') {\n                negative = true;\n                op = op.substring(1);\n            }\n\n            if (typeof filter[j] == 'object' && op !== '@' && !Array.isArray(filter[j])) {\n                if (op === '[]') {\n                    cmp = filterObjectsArray(filter[j], item[paramName], true) === false;\n\n                    cmp ^= negative;\n\n                    if (cmp) {\n                        found = false;\n                        break;\n                    }\n\n                } else {\n                    cmp = filterObjectsArray(filter[j], [item[paramName]], true) === false;\n\n                    cmp ^= negative;\n\n                    if (cmp) {\n                        found = false;\n                        break;\n                    }\n                }\n\n                continue;\n                //break;\n            }\n\n            try {\n\n                if (!item.hasOwnProperty(paramName)) {\n                    found = negative;\n                    break;\n                }\n            } catch (e) {\n                console.log(item, paramName, j, items);\n                throw e;\n            }\n\n            switch (op) {\n                case '~':\n                    cmp = item[paramName].indexOf(filter[j]) !== -1;\n                    break;\n                case '<':\n                    cmp = parseFloat(item[paramName]) < filter[j];\n                    break;\n                case '<=':\n                    cmp = parseFloat(item[paramName]) <= filter[j];\n                    break;\n                case '>':\n                    cmp = parseFloat(item[paramName]) > filter[j];\n                    break;\n                case '>=':\n                    cmp = parseFloat(item[paramName]) >= filter[j];\n                    break;\n                case '@':\n                    cmp = filter[j].indexOf(item[paramName]) !== -1;\n                    break;\n                default:\n                    cmp = item[paramName] == filter[j];\n                    break;\n            }\n\n            if (negative)\n                cmp = !cmp;\n\n            found = cmp;\n\n            if (!found)\n                break;\n        }\n\n        if (found) {\n            if (callback)\n                callback.call(window, item, i, items);\n\n            if (!!single)\n                return item;\n\n            if (byKey) {\n                result[i] = item;\n            } else {\n                result.push(item);\n            }\n        }\n    }\n\n    if (!!single)\n        return false;\n\n    return result;\n}\n\nexport function objectDiff(obj1, obj2) {\n    let i, result, val;\n\n    result = {};\n\n    if (typeof obj1 === 'undefined' || typeof obj2 === 'undefined')\n        return result;\n\n    for (i in obj1) {\n        if (!obj1.hasOwnProperty(i))\n            continue;\n\n        if (!obj2.hasOwnProperty(i)) {\n            result[i] = obj1[i];\n            continue;\n        }\n\n        if (typeof obj1[i] !== typeof obj2[i]) {\n            result[i] = obj1[i];\n            continue;\n        }\n\n        if (typeof obj1[i] == 'object' && obj1[i] !== null) {\n            if (obj2[i] == null) {\n                result[i] = obj1[i];\n                continue;\n            }\n\n            val = objectDiff(obj1[i], obj2[i]);\n\n            if (Object.keys(val).length === 0)\n                continue;\n\n            result[i] = val;\n            continue;\n        }\n\n        if (obj1[i] !== obj2[i]) {\n            result[i] = obj1[i];\n        }\n    }\n\n    return result;\n};\n\nexport function numWord(value, words, show) {\n    value = parseInt(value);\n    show = show !== false;\n\n    let num = value % 100;\n\n    if (num > 19) {\n        num = num % 10;\n    }\n\n    let out = show ? value + ' ' : '';\n\n    switch (num) {\n        case 1:\n            out += words[0];\n            break;\n        case 2:\n        case 3:\n        case 4:\n            out += words[1];\n            break;\n        default:\n            out += words[2];\n            break;\n    }\n\n    return out;\n}\n\nexport function pushToObject(obj, value) {\n    let i, val, key = 0;\n\n    for (i in obj) {\n        if (!obj.hasOwnProperty(i))\n            continue;\n        key++;\n\n        val = parseInt(i);\n        if (val > key)\n            key = val + 1;\n    }\n\n    while (obj.hasOwnProperty(key))\n        key++;\n\n    obj[key] = value;\n}\n\nexport function getValueByPath(obj, name) {\n    let param = obj, i, j, subparam, multiple;\n\n    multiple = name.substring(name.length - 2) === '[]';\n    if (multiple)\n        name = name.substring(0, name.length - 2);\n\n    while (true) {\n        i = name.indexOf('[');\n\n        if (i === -1) {\n            return param[name];\n        }\n\n        j = name.indexOf(']', i);\n\n        subparam = name.substring(0, i);\n        if (subparam.length > 0) {\n            if (!param.hasOwnProperty(subparam))\n                return undefined;\n\n            param = param[subparam];\n        }\n\n        subparam = name.substring(i + 1, j);\n        name = name.substring(j + 1);\n\n        if (name.length == 0) {\n            return param[subparam];\n        }\n\n        if (!param.hasOwnProperty(subparam))\n            return undefined;\n\n        param = param[subparam];\n    }\n}\n\nexport function setValueByPath(obj, name, value) {\n    let param = obj, i, j, subparam, multiple;\n\n    multiple = name.substring(name.length - 2) === '[]';\n    if (multiple)\n        name = name.substring(0, name.length - 2);\n\n    while (true) {\n        i = name.indexOf('[');\n\n        if (i === -1) {\n            param[name] = value;\n            return obj;\n        }\n\n        j = name.indexOf(']', i);\n\n        subparam = name.substring(0, i);\n        if (subparam.length > 0) {\n            if (!param.hasOwnProperty(subparam))\n                param[subparam] = {};\n            param = param[subparam];\n        }\n\n        subparam = name.substring(i + 1, j);\n        name = name.substring(j + 1);\n\n        if (name.length == 0) {\n            param[subparam] = value;\n            return obj;\n        }\n\n        if (!param.hasOwnProperty(subparam))\n            param[subparam] = {};\n\n        param = param[subparam];\n    }\n}\n\nexport function saveFormDataObj(obj, node) {\n    let items, item, i, j, value, name, multiple,\n        values = {};\n\n\n    items = node.querySelectorAll('input, textarea');\n\n    for (i = 0; i < items.length; i++) {\n        item = items[i];\n\n        name = item.name.trim();\n        if (name.length === 0)\n            continue;\n\n        multiple = name.substring(name.length - 2) === '[]';\n        if (multiple)\n            name = name.substring(0, name.length - 2);\n\n        if (item.tagName != 'TEXTAREA') {\n            switch (item.type) {\n                case 'file':\n                    //TODO\n                    break;\n                case 'radio':\n                case 'checkbox':\n                    if (!item.checked) {\n\n                        if (multiple) {\n                            if (!values.hasOwnProperty(name)) {\n                                values[name] = [];\n                            }\n                        }\n\n                        continue;\n                    }\n                    value = item.value;\n                    break;\n                default:\n                    value = item.value;\n                    break;\n            }\n        } else {\n            value = item.value;\n        }\n\n        if (multiple) {\n            if (!values.hasOwnProperty(name)) {\n                values[name] = [];\n            }\n\n            values[name].push(value);\n        } else {\n            values[name] = value;\n        }\n    }\n\n    items = node.querySelectorAll('select');\n\n    for (i = 0; i < items.length; i++) {\n        item = items[i];\n\n        name = item.name.trim();\n        if (name.length === 0)\n            continue;\n\n        multiple = name.substring(name.length - 2) === '[]';\n        if (multiple)\n            name = name.substring(0, name.length - 2);\n\n        if (multiple) {\n            if (!values.hasOwnProperty(name)) {\n                values[name] = [];\n            }\n        }\n\n        if (item.selectedOptions.length == 0) {\n            if (!multiple) {\n                values[name] = '';\n            }\n            continue;\n        }\n\n        if (multiple) {\n            for (j = 0; j < item.selectedOptions.length; j++) {\n                values[name].push(item.selectedOptions[j].value);\n            }\n        } else {\n            values[name] = item.selectedOptions[0].value;\n        }\n    }\n\n    for (i in values) {\n        if (!values.hasOwnProperty(i))\n            continue;\n\n        setValueByPath(obj, i, values[i]);\n    }\n\n    return obj;\n}\n\nexport function bindObjEvents(node, obj, prefix, events) {\n    if (!Array.isArray(events))\n        events = ['click', 'change', 'input'];\n\n    let data = {\n        obj: obj,\n        prefix: typeof prefix === 'string' ? prefix : '',\n    };\n\n    if (typeof window.jQuery === 'function') {\n        events.forEach(name => {\n            $(node).on(name, BX.proxy(nodeEvent, data));\n        });\n    } else {\n        events.forEach(name => {\n            BX.bindDelegate(\n                node,\n                name,\n                {},\n                BX.proxy(nodeEvent, data)\n            );\n        });\n    }\n}\n\nfunction nodeEvent(e) {\n    let target = e.target || e.srcElement,\n        action, type = e.type.charAt(0).toUpperCase() + e.type.slice(1).toLowerCase(),\n        clickEvent = type === 'Click';\n\n    while (target) {\n        if (target.nodeType != Node.ELEMENT_NODE)\n            break;\n\n        if (clickEvent && target.hasAttribute('data-action')) {\n\n            action = normalizeEntityName(target.getAttribute('data-action'), this.prefix) + 'Action';\n            if (window.debugEvent)\n                console.log(this, action);\n\n            if (typeof this.obj[action] == 'function') {\n                BX.proxy_context = target;\n                try {\n                    this.obj[action](e, target);\n                } finally {\n                    BX.proxy_context = null;\n                }\n                return;\n            }\n        }\n\n        if (target.hasAttribute('data-entity')) {\n\n            action = normalizeEntityName(target.getAttribute('data-entity'), this.prefix) + type;\n            if (window.debugEvent)\n                console.log(this, action);\n\n            if (typeof this.obj[action] == 'function') {\n                BX.proxy_context = target;\n                try {\n                    this.obj[action](e, target);\n                } finally {\n                    BX.proxy_context = null;\n                }\n                return;\n            }\n        }\n\n        if (!clickEvent)\n            break;\n\n        target = target.parentNode;\n    }\n}\n\nexport function normalizeEntityName(value, prefix) {\n    let parts = value.split(/[-_]/),\n        result = '';\n\n    if (typeof prefix !== 'string')\n        prefix = '';\n\n    if (parts.length > 1) {\n        parts.forEach(s => {\n            if (result.length > 0) {\n                result += s.charAt(0).toUpperCase() + s.slice(1).toLowerCase();\n            } else {\n                result = s.toLowerCase();\n            }\n\n        });\n    } else {\n        if (value.toUpperCase() == value) {\n            result = value.toLowerCase();\n        } else {\n            result = value;\n        }\n    }\n\n    if (prefix.length > 0) {\n        result = prefix + result.charAt(0).toUpperCase() + result.slice(1);\n    }\n\n    return result;\n}\n\nclass nodeSingleEntity {\n\n    constructor(node, entityName) {\n        this.node = node;\n        this.entityName = entityName;\n        this.entity = false;\n    }\n\n    getEntity() {\n        let node;\n\n        if (typeof this.node === 'function')\n        {\n            node = this.node();\n        } else {\n            node = this.node;\n        }\n\n        if (this.entity) {\n            if (node.contains(this.entity))\n                return this.entity;\n\n            console.log('invalid entity');\n        }\n\n        if (!node)\n            return null;\n\n        this.entity = null;\n\n        Object.values(node.querySelectorAll('[data-entity]')).every(item => {\n            if (!item.devbxEntityName) {\n                item.devbxEntityName = normalizeEntityName(item.dataset.entity);\n            }\n\n            if (item.devbxEntityName === this.entityName) {\n                this.entity = item;\n                return false;\n            }\n\n            return true;\n        });\n\n        return this.entity;\n    }\n}\n\nexport class nodeArrayEntity {\n    constructor(node, entityName) {\n        this.node = node;\n        this.entityName = entityName;\n    }\n\n    getEntity() {\n\n        let result = [],\n            node;\n\n        if (typeof this.node === 'function')\n        {\n            node = this.node();\n        } else {\n            node = this.node;\n        }\n\n        if (!node)\n            return [];\n\n        node.querySelectorAll('[data-entity]').forEach(item => {\n\n            if (!item.devbxEntityName) {\n                item.devbxEntityName = normalizeEntityName(item.dataset.entity);\n            }\n\n            if (item.devbxEntityName === this.entityName) {\n                result.push(item);\n            }\n        });\n\n        return result;\n    }\n}\n\nexport class nodSubEntity {\n\n    constructor(node, entityName, data) {\n        this.node = node;\n        this.entityName = entityName;\n        this.data = data;\n        this.entity = null;\n        this.entities = null;\n    }\n\n    getEntity() {\n\n        let node;\n\n        if (typeof this.node === 'function')\n        {\n            node = this.node();\n        } else {\n            node = this.node;\n        }\n\n        if (!node)\n            return null;\n\n        if (this.entity) {\n            if (node.contains(this.entity))\n                return this.entities;\n\n            console.log('invalid entity');\n        }\n\n        if (!node)\n            return null;\n\n        this.entity = null;\n        this.entities = null;\n\n        Object.values(node.querySelectorAll('[data-entity]')).every(item => {\n            if (!item.devbxEntityName) {\n                item.devbxEntityName = normalizeEntityName(item.dataset.entity);\n            }\n\n            if (item.devbxEntityName === this.entityName) {\n                this.entity = item;\n                return false;\n            }\n\n            return true;\n        });\n\n        this.entities = Object.assign({}, this.data);\n\n        getNodeEntities(node, this.entities);\n        return this.entities;\n    }\n}\n\nexport function getNodeEntities(node, data) {\n    Object.keys(data).forEach(entityName => {\n        let obj;\n\n        if (Array.isArray(data[entityName])) {\n            obj = new nodeArrayEntity(node, entityName);\n        } else if (typeof data[entityName] === 'object')\n        {\n            obj = new nodSubEntity(node, entityName, data[entityName]);\n        }  else {\n            obj = new nodeSingleEntity(node, entityName);\n        }\n\n        Object.defineProperty(data, entityName, {\n            get: () => {\n                return obj.getEntity();\n            }\n        });\n    });\n\n}\n\nexport function deepClone(obj, mapData = {}) {\n\n    let result;\n\n    if (Array.isArray(obj)) {\n        result = [];\n        result.push(...obj);\n    } else {\n        result = Object.assign({}, obj);\n    }\n\n    if (!mapData.hasOwnProperty('old'))\n        mapData.old = [];\n\n    if (!mapData.hasOwnProperty('new'))\n        mapData.new = [];\n\n    Object.keys(result).forEach(k => {\n\n        if (typeof result[k] === 'object' && result[k] !== null) {\n            let found = false;\n\n            for (let i = 0; i < mapData.old.length; i++) {\n                if (mapData.old[i] === result[k]) {\n                    result[k] = mapData.new[i];\n                    found = true;\n                }\n            }\n\n            if (!found) {\n                mapData.old.push(result[k]);\n                result[k] = deepClone(result[k], mapData);\n                mapData.new.push(result[k]);\n            }\n        }\n    });\n\n    return result;\n}"],"names":["filterObjectsArray","filter","items","options","i","j","result","found","item","paramName","op","negative","cmp","callback","operations","single","byKey","excludeKeys","hasOwnProperty","Object","values","indexOf","substring","Array","isArray","e","console","log","parseFloat","call","window","push","objectDiff","obj1","obj2","val","keys","length","numWord","value","words","show","parseInt","num","out","pushToObject","obj","key","getValueByPath","name","param","subparam","multiple","undefined","setValueByPath","saveFormDataObj","node","querySelectorAll","trim","tagName","type","checked","selectedOptions","bindObjEvents","prefix","events","data","jQuery","forEach","$","on","BX","proxy","nodeEvent","bindDelegate","target","srcElement","action","charAt","toUpperCase","slice","toLowerCase","clickEvent","nodeType","Node","ELEMENT_NODE","hasAttribute","normalizeEntityName","getAttribute","debugEvent","proxy_context","parentNode","parts","split","s","nodeSingleEntity","entityName","entity","contains","every","devbxEntityName","dataset","nodeArrayEntity","nodSubEntity","entities","assign","getNodeEntities","defineProperty","get","getEntity","deepClone","mapData","old","k"],"mappings":"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"}